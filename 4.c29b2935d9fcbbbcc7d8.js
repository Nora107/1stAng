(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Iab2:function(t,e,n){var a,o;void 0===(o="function"==typeof(a=function(){"use strict";function e(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){c(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,i,c){var l=o.URL||o.webkitURL,b=document.createElement("a");b.download=i=i||t.name||"download",b.rel="noopener","string"==typeof t?(b.href=t,b.origin===location.origin?a(b):n(b.href)?e(t,i,c):a(b,b.target="_blank")):(b.href=l.createObjectURL(t),setTimeout(function(){l.revokeObjectURL(b.href)},4e4),setTimeout(function(){a(b)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,i){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),o);else if(n(t))e(t,o,i);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout(function(){a(c)})}}:function(t,n,a,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,a);var l="application/octet-stream"===t.type,b=/constructor/i.test(o.HTMLElement)||o.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||l&&b||i)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=r?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},s.readAsDataURL(t)}else{var d=o.URL||o.webkitURL,u=d.createObjectURL(t);c?c.location=u:location.href=u,c=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})?a.apply(e,[]):a)||(t.exports=o)},jkDv:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",function(){return D});var a=n("ofXK"),o=n("fXoL"),i=n("H+bZ"),c=n("tyNb"),l=n("/t3+"),b=n("bTqV"),r=n("NFeN"),s=n("XhcP"),d=n("MutI"),u=n("FKr1");let p=(()=>{class t{constructor(t,e){this.api=t,this.router=e,this.mode="side",this.menu=[{name:"Dashboard",icon:"dashboard",url:"/admin/dashboard"},{group:"Menu Group",children:[{name:"Image Gallery",icon:"images",url:"/admin/gallery"}]}]}ngOnInit(){this.checkLogin()}checkLogin(){this.api.get("bookswithauth/status").subscribe(t=>{},t=>{this.router.navigate(["/login"])})}logout(){confirm("Keluar aplikasi?")&&(localStorage.removeItem("appToken"),window.location.reload())}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(i.a),o.Pb(c.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-admin"]],decls:33,vars:1,consts:[["color","primary",1,"example-header"],["mat-icon-button","",3,"click"],[1,"uk-width-expand"],["mat-button","",3,"click"],[1,"admin-container"],["mode","side","opened","",1,"sidenav-left",3,"position"],["sidenav",""],["routerLink","/admin/dashboard"],["matListIcon",""],["matLine",""],["routerLink","/admin/product"],["routerLink","/admin/images"]],template:function(t,e){if(1&t){const t=o.Wb();o.Tb(0),o.Vb(1,"mat-toolbar",0),o.Vb(2,"button",1),o.fc("click",function(){return o.yc(t),o.wc(14).toggle()}),o.Vb(3,"mat-icon"),o.Gc(4,"menu"),o.Ub(),o.Ub(),o.Vb(5,"span"),o.Gc(6,"My Angular"),o.Ub(),o.Qb(7,"div",2),o.Vb(8,"small"),o.Gc(9,"Admin"),o.Ub(),o.Vb(10,"button",3),o.fc("click",function(){return e.logout()}),o.Gc(11,"Keluar"),o.Ub(),o.Ub(),o.Vb(12,"mat-drawer-container",4),o.Vb(13,"mat-drawer",5,6),o.Vb(15,"mat-nav-list"),o.Vb(16,"mat-list-item",7),o.Vb(17,"mat-icon",8),o.Gc(18,"dashboard"),o.Ub(),o.Vb(19,"h3",9),o.Gc(20,"Dashboard"),o.Ub(),o.Ub(),o.Vb(21,"mat-list-item",10),o.Vb(22,"mat-icon",8),o.Gc(23,"camera_enhance"),o.Ub(),o.Vb(24,"h3",9),o.Gc(25,"Products"),o.Ub(),o.Ub(),o.Vb(26,"mat-list-item",11),o.Vb(27,"mat-icon",8),o.Gc(28,"camera_enchance"),o.Ub(),o.Vb(29,"h3",9),o.Gc(30,"Edit Image"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(31,"mat-drawer-content"),o.Qb(32,"router-outlet"),o.Ub(),o.Ub(),o.Sb()}2&t&&(o.Cb(13),o.oc("position","start"))},directives:[l.a,b.a,r.a,s.b,s.a,d.d,d.b,c.b,d.a,u.j,s.c,c.d],styles:[".admin-container[_ngcontent-%COMP%]{position:absolute;top:60px;bottom:0;left:0;right:0}mat-drawer-content[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;align-items:flex-start;background-color:#ccc}.sidenav-left[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:250px}"]}),t})(),f=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,e){1&t&&(o.Vb(0,"p"),o.Gc(1,"dashboard works!"),o.Ub())},styles:[""]}),t})();var g=n("0IaG");let m=(()=>{class t{constructor(t){this.dialog=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(g.b))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-gallery"]],decls:2,vars:0,template:function(t,e){1&t&&(o.Vb(0,"h2"),o.Gc(1,"Image Gallery"),o.Ub())},styles:[".upload-icon[_ngcontent-%COMP%]{padding-bottom:100%;border-radius:10px;border:1px dashed #fff;margin-bottom:15px;position:relative}.upload-icon[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{position:absolute;text-align:center;width:100%;bottom:40%}"]}),t})(),h=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["app-images"]],decls:2,vars:0,template:function(t,e){1&t&&(o.Vb(0,"p"),o.Gc(1,"images works!"),o.Ub())},styles:[""]}),t})();var U=n("w55g"),V=n("Iab2");let k=(()=>{class t{constructor(t,e,n){this.api=t,this.dialogRef=e,this.dialogData=n}ngOnInit(){console.log(this.dialogData)}onFileChange(t){t.target.files.length>0&&(this.selectedFile=t.target.files[0],console.log(this.selectedFile))}uploadFile(){let t=new FormData;t.append("file",this.selectedFile),this.loadingUpload=!0,this.api.upload(t).subscribe(t=>{this.updateProduct(t),console.log(t)},t=>{this.loadingUpload=!1,alert("Gagal mengunggah file")})}updateProduct(t){1==t.status?(this.updateBook(t),alert("File berhasil diunggah"),this.loadingUpload=!1,this.dialogRef.close()):alert(t.message)}updateBook(t){this.api.put("books/"+this.dialogData.id,{url:t.url}).subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(i.a),o.Pb(g.g),o.Pb(g.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-file-uploader"]],decls:13,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"uk-flex","uk-flex-middle","uk-flex-center",2,"height","100px","outline","2px dashed #ccc","margin","100px",3,"click"],["type","file","id","file",2,"display","none",3,"change"],["fileInput",""],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t){const t=o.Wb();o.Vb(0,"h1",0),o.Gc(1,"Unggah File"),o.Ub(),o.Vb(2,"div",1),o.Vb(3,"div",2),o.fc("click",function(){return o.yc(t),o.wc(7).click()}),o.Vb(4,"span"),o.Gc(5),o.Ub(),o.Ub(),o.Vb(6,"input",3,4),o.fc("change",function(t){return e.onFileChange(t)}),o.Ub(),o.Ub(),o.Vb(8,"div",5),o.Vb(9,"button",6),o.Gc(10,"Cancel"),o.Ub(),o.Vb(11,"button",7),o.fc("click",function(){return e.uploadFile()}),o.Gc(12),o.Ub(),o.Ub()}2&t&&(o.Cb(5),o.Hc(e.selectedFile?e.selectedFile:"Pilih File"),o.Cb(6),o.oc("disabled",e.loadingUpload),o.Cb(1),o.Hc(e.loadingUpload?"Uploading...":"Upload"))},directives:[g.h,g.e,g.c,b.a,g.d],styles:[""]}),t})();var v=n("kmnG"),w=n("qFsG"),y=n("3Pt+");let G=(()=>{class t{constructor(t,e,n){this.dialogRef=t,this.data=e,this.api=n}ngOnInit(){}saveData(){null==this.data.id?this.api.post("books",this.data).subscribe(t=>{this.dialogRef.close(t)},t=>{alert(t)}):this.api.post("books/"+this.data.id,this.data).subscribe(t=>{this.dialogRef.close(t)},t=>{alert(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(g.g),o.Pb(g.a),o.Pb(i.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-product-detail"]],decls:32,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(o.Vb(0,"h3",0),o.Gc(1," Detail Produk "),o.Ub(),o.Vb(2,"div",1),o.Vb(3,"mat-form-field",2),o.Vb(4,"mat-label"),o.Gc(5,"Judul"),o.Ub(),o.Vb(6,"input",3),o.fc("ngModelChange",function(t){return e.data.title=t}),o.Ub(),o.Ub(),o.Vb(7,"mat-form-field",2),o.Vb(8,"mat-label"),o.Gc(9,"Penulis"),o.Ub(),o.Vb(10,"input",3),o.fc("ngModelChange",function(t){return e.data.author=t}),o.Ub(),o.Ub(),o.Vb(11,"mat-form-field",2),o.Vb(12,"mat-label"),o.Gc(13,"Penerbit"),o.Ub(),o.Vb(14,"input",3),o.fc("ngModelChange",function(t){return e.data.publisher=t}),o.Ub(),o.Ub(),o.Vb(15,"mat-form-field",2),o.Vb(16,"mat-label"),o.Gc(17,"Tahun Penerbit"),o.Ub(),o.Vb(18,"input",3),o.fc("ngModelChange",function(t){return e.data.year=t}),o.Ub(),o.Ub(),o.Vb(19,"mat-form-field",2),o.Vb(20,"mat-label"),o.Gc(21,"ISBN"),o.Ub(),o.Vb(22,"input",3),o.fc("ngModelChange",function(t){return e.data.isbn=t}),o.Ub(),o.Ub(),o.Vb(23,"mat-form-field",2),o.Vb(24,"mat-label"),o.Gc(25,"Harga"),o.Ub(),o.Vb(26,"input",4),o.fc("ngModelChange",function(t){return e.data.price=t}),o.Ub(),o.Ub(),o.Ub(),o.Vb(27,"div",5),o.Vb(28,"button",6),o.Gc(29,"Batal"),o.Ub(),o.Vb(30,"button",7),o.fc("click",function(){return e.saveData()}),o.Gc(31),o.Ub(),o.Ub()),2&t&&(o.Cb(6),o.oc("ngModel",e.data.title),o.Cb(4),o.oc("ngModel",e.data.author),o.Cb(4),o.oc("ngModel",e.data.publisher),o.Cb(4),o.oc("ngModel",e.data.year),o.Cb(4),o.oc("ngModel",e.data.isbn),o.Cb(4),o.oc("ngModel",e.data.price),o.Cb(4),o.oc("disabled",e.loading),o.Cb(1),o.Hc(e.loading?"Menyimpan..":"Simpan"))},directives:[g.h,g.e,v.b,v.e,w.b,y.c,y.i,y.k,y.m,g.c,b.a,g.d],styles:[""]}),t})();var C=n("Xa2L"),x=n("Wp6s");function M(t,e){1&t&&(o.Vb(0,"div",2),o.Qb(1,"mat-spinner",3),o.Ub())}function P(t,e){if(1&t){const t=o.Wb();o.Vb(0,"button",13),o.fc("click",function(){o.yc(t);const e=o.jc().$implicit;return o.jc(2).downloadFile(e)}),o.Vb(1,"mat-icon"),o.Gc(2,"download"),o.Ub(),o.Ub()}}function I(t,e){if(1&t){const t=o.Wb();o.Vb(0,"tr"),o.Vb(1,"td"),o.Ec(2,P,3,0,"button",10),o.Ub(),o.Vb(3,"td"),o.Gc(4),o.Ub(),o.Vb(5,"td"),o.Gc(6),o.Ub(),o.Vb(7,"td"),o.Gc(8),o.Ub(),o.Vb(9,"td"),o.Gc(10),o.Ub(),o.Vb(11,"td"),o.Gc(12),o.Ub(),o.Vb(13,"td"),o.Gc(14),o.Ub(),o.Vb(15,"td"),o.Gc(16),o.Ub(),o.Vb(17,"td",8),o.Vb(18,"button",11),o.fc("click",function(){o.yc(t);const n=e.$implicit;return o.jc(2).uploadFile(n)}),o.Gc(19,"Upload"),o.Ub(),o.Vb(20,"button",11),o.fc("click",function(){o.yc(t);const n=e.$implicit,a=e.index;return o.jc(2).productDetail(n,a)}),o.Gc(21,"Edit"),o.Ub(),o.Vb(22,"button",12),o.fc("click",function(){o.yc(t);const n=e.index;return o.jc(2).deleteProduct(n)}),o.Gc(23),o.Ub(),o.Ub(),o.Ub()}if(2&t){const t=e.$implicit,n=e.index,a=o.jc(2);o.Cb(2),o.oc("ngIf",""!=t.url),o.Cb(2),o.Hc(n+1),o.Cb(2),o.Hc(t.title),o.Cb(2),o.Hc(t.author),o.Cb(2),o.Hc(t.publisher),o.Cb(2),o.Hc(t.year),o.Cb(2),o.Hc(t.isbn),o.Cb(2),o.Hc(t.price),o.Cb(6),o.oc("disabled",a.loadingDelete[n]),o.Cb(1),o.Hc(a.loadingDelete[n]?"Menghapus..":"Delete")}}function F(t,e){if(1&t){const t=o.Wb();o.Vb(0,"mat-card"),o.Vb(1,"mat-card-header"),o.Vb(2,"mat-card-title"),o.Gc(3),o.Ub(),o.Ub(),o.Vb(4,"mat-card-content"),o.Vb(5,"div",4),o.Qb(6,"span",5),o.Vb(7,"button",6),o.fc("click",function(){return o.yc(t),o.jc().productDetail({},-1)}),o.Gc(8,"Tambah Produk"),o.Ub(),o.Ub(),o.Vb(9,"table",7),o.Vb(10,"thead"),o.Qb(11,"th"),o.Vb(12,"th"),o.Gc(13,"No"),o.Ub(),o.Vb(14,"th"),o.Gc(15,"Judul"),o.Ub(),o.Vb(16,"th"),o.Gc(17,"Penulis"),o.Ub(),o.Vb(18,"th"),o.Gc(19,"Penerbit"),o.Ub(),o.Vb(20,"th"),o.Gc(21,"Tahun Terbit"),o.Ub(),o.Vb(22,"th"),o.Gc(23,"ISBN"),o.Ub(),o.Vb(24,"th"),o.Gc(25,"Harga"),o.Ub(),o.Vb(26,"th",8),o.Gc(27,"#"),o.Ub(),o.Ub(),o.Vb(28,"tbody"),o.Qb(29,"tr"),o.Ec(30,I,24,10,"tr",9),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&t){const t=o.jc();o.Cb(3),o.Hc(t.title),o.Cb(27),o.oc("ngForOf",t.books)}}const O=[{path:"",component:p,children:[{path:"dashboard",component:f},{path:"gallery",component:m},{path:"images",component:h},{path:"product",component:(()=>{class t{constructor(t,e){this.dialog=t,this.api=e,this.book={},this.books=[],this.loadingDelete={},this.title="Produk",this.getBooks()}ngOnInit(){}getBooks(){this.loading=!0,this.api.get("bookswithauth").subscribe(t=>{this.books=t,this.loading=!1},t=>{this.loading=!1,alert("Tidak dapat mengambil data")})}productDetail(t,e){this.dialog.open(G,{width:"400px",data:t}).afterClosed().subscribe(t=>{t&&(-1==e?this.books.push(t):this.books[e]=t)})}deleteProduct(t){confirm("Delete item?")&&this.api.delete("books/"+this.books[t].id).subscribe(e=>{this.books.splice(t,1),this.loadingDelete[t]=!1},e=>{alert("Tidak dapat menghapus data"),this.loadingDelete[t]=!1})}uploadFile(t){this.dialog.open(k,{width:"400px",data:t}).afterClosed().subscribe(t=>{})}downloadFile(t){V.saveAs("http://api.sunhouse.co.id/bookstore/"+t.url)}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(g.b),o.Pb(i.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-product"]],decls:2,vars:2,consts:[["style","height: 300px;","class","uk-flex uk-flex-center uk-table-middle",4,"ngIf"],[4,"ngIf"],[1,"uk-flex","uk-flex-center","uk-table-middle",2,"height","300px"],["diameter","30"],[1,"uk-flex"],[1,"uk-width-expand"],["mat-flat-button","","color","primary",3,"click"],[1,"uk-table","uk-table-middle","uk-table-divider"],["align","right"],[4,"ngFor","ngForOf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"disabled","click"],["mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(o.Ec(0,M,2,0,"div",0),o.Ec(1,F,31,2,"mat-card",1)),2&t&&(o.oc("ngIf",e.loading),o.Cb(1),o.oc("ngIf",!e.loading))},directives:[a.l,C.b,x.a,x.c,x.e,x.b,b.a,a.k,r.a],styles:[""]}),t})()},{path:"",redirectTo:"/admin/dashboard",pathMatch:"full"}]}];let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({imports:[[a.c,c.c.forChild(O),U.a,y.e]]}),t})()}}]);